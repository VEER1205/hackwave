<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PaisaBuddy - Reset Password</title>
    <link rel="stylesheet" href="CSS/reset-password.css" />
  </head>
  <body>
    <div class="card">
      <h1>Reset Password</h1>
      <p class="lead">Enter your username and set a new password.</p>

      <form id="resetForm" method="post" action="/reset-password">
        <div class="field">
          <label for="username">Username</label>
          <input
            id="username"
            type="text"
            name="name"
            placeholder="your username"
            required
          />
        </div>
        <input
          type="hidden"
          name="token"
          value="<%= typeof token !== 'undefined' ? token : '' %>"
        />
        <input
          type="hidden"
          name="userId"
          value="<%= typeof userId !== 'undefined' ? userId : '' %>"
        />
        <div class="field">
          <label for="newPass">New Password</label>
          <input
            id="newPass"
            name="newPassword"
            type="password"
            placeholder="Enter new password"
            required
          />
          <button
            type="button"
            class="toggle-btn"
            data-target="newPass"
            title="Show password"
          ></button>
        </div>

        <div class="field">
          <label for="confirmPass">Confirm New Password</label>
          <input
            id="confirmPass"
            name="confirmPassword"
            type="password"
            placeholder="Confirm new password"
            required
          />
          <button
            type="button"
            class="toggle-btn"
            data-target="confirmPass"
            title="Show password"
          ></button>
        </div>
        <button class="submit" id="submitBtn" type="submit">
          Save New Password
        </button>
        <div class="hint">
          Tip: Use at least 8 characters for a stronger password.
        </div>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- SweetAlert2 Alerts (API style from 1st snippet) -->
    <script>
       <% if (errors && errors.length > 0) { %>
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: "<%= errors.join('\\n') %>"
        });
      <% } else if (success && success.length > 0) { %>
        Swal.fire({
          icon: 'success',
          title: 'Success!',
          text: "<%= success.join('\\n') %>"
        });
      <% } %>
    </script>
  </body>
</html>
